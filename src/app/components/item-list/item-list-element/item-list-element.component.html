<div class="d-flex flex-column px-0 py-2" style="min-height: 200px;"
     [ngClass]="{'border-bottom': !last_item}">
  <!-- Badges -->
  <div class="mt-1 mb-3">
      <span class="form-check float-start">
          <input [formControl]="check_box" class="form-check-input" type="checkbox" value=""
                 id="form_check1" chan>
      </span>
      <pure-item-badges [item] = "item" [showVersion]="true" [showPublicStatusIcon]="true"/>
  </div>

  <!-- Title -->
  <div>
      <a class="nav-link" routerLink="/view/{{item?.objectId + '_' + item?.versionNumber}}">
        <h3 class="" style="font-weight: normal; font-size: 1.4rem;" [innerHTML]="item?.metadata?.title | sanitizeHtml" data-test="item-title"
        ></h3>
      </a>
  </div>

  <div class="row flex-grow-1">
    <div class="col-sm-9 flex-grow-1">
      <div class="d-flex flex-column h-100">
        <div class="d-inline-flex">
          @for (author of first_three_authors; track author; let i = $index) {
            <div class="me-3">
              @if(author.person) {
                {{ author?.person?.familyName || 'n/a' }}{{author?.person?.givenName ? ', ' + author?.person?.givenName : '' }}
                <sup>
                  <pure-cone-icon [orcid]="author?.person?.orcid"/>
                </sup>
              } @else if (author.organization) {
                {{ (author?.organization?.name || 'n/a') }}
              }
            </div>
          }
          @if (creators_length && creators_length > 3) {
            <div class="">
              <i>{{ (creators_length - 3) }} {{'ItemList.moreCreators' | translate }}...</i>
            </div>
          }
        </div>
      @if (sourceCitation) {
        <div class="my-3">
            {{ 'ItemList.publishedIn' | translate }}: {{ sourceCitation }}
        </div>
      }


      @if(abstract) {

        <div class="mt-auto">
        <button type="button" class="btn btn-sm p-0" tabindex="0"
           ngbTooltip="Abstract" [ngbPopover]="abstract" [popoverTitle]="item?.metadata?.title" popoverClass="custom-popover"><i class="bi bi-card-text"></i>
        </button>
        </div>
      }
      </div>

    </div>


    <div class="col-sm-3" [class.border-start]="files.length > 0 || locators.length > 0">

      @if(files.length > 0) {
        <div>{{files.length}} {{files.length > 1 ? ('common.files' | translate) : (('common.file' | translate)) }}</div>
        <div class="d-flex flex-column gap-1">
          @for (file of publicFiles.slice(0,2); track file) {

              <a class="small" href="{{ingeUri + file.content}}" target="_blank"
                 style="overflow-wrap: break-word;" [ngbTooltip]="file.metadata.title">
                  <i class="bi-file-earmark-text me-1"></i>{{'ContentCategories.' + file.metadata.contentCategory | translate}}
              </a>
          }

        @if(files.length > 2 || (publicFiles.length < files.length)) {
          <a class="small fst-italic" routerLink="/view/{{item?.objectId + '_' + item?.versionNumber}}">{{ 'common.showAll' | translate }}...</a>
        }
        </div>
      }

      @if(locators.length > 0) {
        <div class="mt-3">{{locators.length}} {{locators.length > 1 ? ('common.links' | translate) : (('common.link' | translate)) }}</div>
        <div class="d-flex flex-column gap-1">

          @for (file of locators.slice(0,2); track file) {

            <a class="small" href="{{file.content}}" target="_blank"
               style="overflow-wrap: break-word;" [ngbTooltip]="file.metadata.title">
              <i class="bi-link me-1"></i>{{'ContentCategories.' + file.metadata.contentCategory | translate}}
            </a>
          }


        @if(locators.length > 2) {
          <a class="small fst-italic" routerLink="/view/{{item?.objectId + '_' + item?.versionNumber}}">{{ 'common.showAll' | translate }}...></a>
        }
        </div>
      }

  </div>

    <!-- Preparation for highlighting fulltexts
    @if(highlightHits.length>0) {
      <b>Hits in files:</b>
      <div class="small">
          @for(hlh of (highlightHits); track $index) {
            <div class="mb-2">
            File: <a href="{{hlh.file.content}}" target="_blank">{{hlh.file.name}}</a>
            @for(hl of hlh.highlights; track $index) {
              <p class="m-1" [innerHTML]="hl"></p>
            }
            </div>
          }
      </div>
    }
    -->

</div>
</div>
