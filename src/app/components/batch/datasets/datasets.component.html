@if(aaSvc.isLoggedIn) {
<div class="batch">
  <pure-batch-nav [areItemsSelected]="areItemsSelected()"/>

  @if(areItemsSelected()) {
  <div class="datasets mt-5">
    <div class="row align-items-center top_nav_pos bg-body">
      <div class="col-12 col-xxl-4">
      @if (number_of_results && number_of_results > 0) {
        <button class="btn btn-outline-secondary h-75 d-inline-block" i18n="@@batch.datasets.remove"
          (click)="removeChecked()">
          Remove checked items
        </button>
      }
      </div>

      <nav class="col-12 col-xxl-5" purePagination #pagination="purePagination" [totalPages]="number_of_pages"
        [pageNo]="current_page" (pageChange)="onPageChange($event)">
        <div class="mpdl-pagination float-xxl-end">
          <button type="button" class="btn btn-sm border border-0" (click)="pagination.first()"
            [disabled]="pagination.isFirst">
            <span class="material-symbols-outlined">
              first_page
            </span>
          </button>
          <button type="button" class="btn btn-sm border border-0" (click)="pagination.prev()"
            [disabled]="pagination.isFirst">
            <span class="material-symbols-outlined">
              navigate_before
            </span>
          </button>
          <span>Page</span>
          <input type="text" class="form-control mx-2" [formControl]="jump_to" [value]="jump_to.value"
            (keyup.enter)="jumpToPage()">
          <span>of {{pagination.totalPages}}</span>
          <button type="button" class="btn btn-sm border border-0" (click)="pagination.next()"
            [disabled]="pagination.isLast">
            <span class="material-symbols-outlined">
              navigate_next
            </span>
          </button>
          <button type="button" class="btn btn-sm border border-0" (click)="pagination.last()"
            [disabled]="pagination.isLast">
            <span class="material-symbols-outlined">
              last_page
            </span>
          </button>
          <select class="form-select" [formControl]="select_pages_2_display"
            (change)="pageSizeHandler($event)" size="1">
            @for (pages of pages_2_display; track pages) {
            <option [selected]="pages.value === 10" [value]="pages.value">{{pages.label}}</option>
            }
          </select>
        </div>
      </nav>
    </div>

    <div class="row">
      <div class="col-lg-9 col-sm-12">
        @if (result_list | async; as list) {
        <div class="card">
          <div class="card-header">
            <div class="form-check ms-4">
              <input #input [formControl]="select_all" class="form-check-input" type="checkbox" value="" id="form_check"
                (change)="select_all_items($event)">
              <label for="form_check"><small
                  [innerHTML]="input.checked ? 'deselect all' : 'select all'"></small></label>
            </div>
          </div>
          <div class="list-group list-group-flush">
            @for (item of list; track item; let last = $last) {
            <div class="list-group-item py-0">
              <pure-item-list-element [item]="item" [last_item]="last"></pure-item-list-element>
            </div>
            }
          </div>
        </div>
        }
      </div>
      <div class="col-lg-3 d-none d-lg-block">
      </div>
    </div>
  </div>
  }
</div>
}