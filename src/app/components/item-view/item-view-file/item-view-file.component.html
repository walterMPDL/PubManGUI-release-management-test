


  @if (files && files.length) {
    @for (file of files; track file; let i = $index) {
      <div class="accordion mt-3" >
        <div class="accordion-item border-0 bg-transparent">
        <div class="row">
          <div class="col-9 text-truncate">

            @if(file.storage==='EXTERNAL_URL' || fileAccessGranted(file)) {
            @let link = (file.storage==='EXTERNAL_URL' ? '' : ingeUri) + file.content;
            <a class="icon-link" href="{{link}}" target="_blank" [ngbTooltip]="file.metadata.title">
              <i class="{{file.storage==='INTERNAL_MANAGED' ?'bi-file-earmark-text' : 'bi-link'}}"></i>
              {{ file.metadata.title }}
            </a>
            }
            @else {
              <span [ngbTooltip]="file.metadata.title">
                <i class="bi-eye-slash-fill"></i> {{ file.metadata.title }}
              </span>
            }
            <div>
              @if(oaStatusIcon(file)) {
              <img alt="OA logo"
                   src="/assets/images/{{oaStatusIcon(file)}}"
                   width="16" height="16" [ngbTooltip]="'Open Access: ' + (file.metadata.oaStatus ?file.metadata.oaStatus : 'NOT_SPECIFIED')"/>
              }
              ({{ 'ContentCategories.' + file.metadata.contentCategory | translate }})
            </div>


          </div>
          <div class="col-3">
            <button class="float-end btn collapsed accordion-button bg-transparent" type="button" data-bs-toggle="collapse"
                    [attr.data-bs-target]="'#collapse'+file.objectId" aria-expanded="true" aria-controls="collapseOne">
              <!--<i class="bi bi-chevron-down"></i>-->
            </button>
          </div>
        </div>

        <div id="collapse{{file.objectId}}" class="accordion-collapse collapse bg-light" aria-labelledby="headingOne">
          <div class="container p-2">
            <small>
            @if(file.storage==='INTERNAL_MANAGED') {
              <div class="mt-1">
                <strong>Visibility</strong>
              </div>
              <div>
                {{ file.visibility }}
              </div>
              @if(file.allowedAudienceIds | empty) {
                <!--
                <div>
                  {{ file.allowedAudienceIds }}
                </div>
                -->
                <div>
                @for(ouName of ipOrganizations(file); track ouName) {
                  {{ouName}}
                }
                </div>
              }
              @if(file.metadata.embargoUntil | empty) {
                <div class="mt-1">
                  <strong>Embargo</strong>
                </div>
                <div class="text-break">
                  {{ file.metadata.embargoUntil }}
                </div>
              }
            <div class="mt-1">
              <strong>File Name</strong>
            </div>
            <div class="text-break">
              {{ file.name }}
            </div>
            <div class="mt-1">
              <strong>MimeType / Checksum</strong>
            </div>
            <div>
              {{ file.mimeType }} | <button type="button" class="btn btn-sm btn-link m-0 p-0" [ngbPopover]="checksumPopup" [autoClose]="'outside'">{{file.checksumAlgorithm}}</button>
            </div>
            <ng-template #checksumPopup>
              {{ file.checksum }}
            </ng-template>

            }
            @if(file.metadata.description | empty) {
            <div class="mt-1">
              <strong>Description</strong>
            </div>
            <div>
              {{ file.metadata.description }}
            </div>
            }
            @if(file.metadata.oaStatus | empty) {
              <div class="mt-1">
                <strong>OA-Status</strong>
              </div>
              <div>
                @if(oaStatusIcon(file)) {
                  <img alt="OA logo"
                       src="/assets/images/{{oaStatusIcon(file)}}"
                       width="16" height="16"/>
                }
                {{ file.metadata.oaStatus }}
              </div>
            }
              @if(file.metadata.license | empty) {
              <div class="mt-1">
                <strong>License</strong>
              </div>
              <div>
                {{ file.metadata.license }}
              </div>
              }

              @if(file.metadata.rights | empty) {
              <div class="mt-1">
                <strong>Copyright</strong>
              </div>
              <div>
                {{ file.metadata.rights }} ({{ file.metadata.copyrightDate }} )
              </div>
              }
            @if(file.pid | empty) {
              <div class="mt-1">
                <strong>Handle</strong>
              </div>
              <div class="row">
                <a class="icon-link" href="https://hdl.handle.net/{{file.pid?.substring(4)}}" target="_blank">
                  <i class="bi-link"></i>
                  <span class="text-truncate">{{ file.pid }}</span>
                </a>
              </div>
            }
            </small>
          </div>

        </div>
  </div>
      </div>
    }
  }
 @else {
   -
 }


